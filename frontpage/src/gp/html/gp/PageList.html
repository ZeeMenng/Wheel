<!DOCTYPE html>

<html lang="zh-cn">
<head>
<!--#include file="/pc/ss/gp/html/cl/Header.html"-->
<script src="../../js/co/CommonList.js" type="text/javascript"></script>
<script src="../../js/gp/Page.js" type="text/javascript"></script>
<script type="text/javascript">
	$(document).ready(
			function() {
				// 初始化列表页主体部分，包括查询条件表单及数据表格等。
				var pageParam = {
					formId : "queryBuilderForm",
					tableId : "contentTable",
					editPage : {
						title : "批量修改表单",
						url : RP_GPPAGE_EDIT
					},
					detailPage : {
						url : RP_GPPAGE_DETAIL
					},
					addPage : {
						url : RP_GPPAGE_ADD
					},
					deleteInterface : {
						url : RU_GPPAGE_DELETE
					},
					deleteListInterface : {
						url : RU_GPPAGE_DELETELIST
					},
					exportExcelInterface : {
						url : RU_GPPAGE_EXPORTEXCEL
					}

				};
				var ajaxParam = {
					url : RU_GPPAGE_GETLISTBYJSONDATA,
					type : "GET",
					submitData : {
						"entityRelated" : {},
						"orderList" : [ {
							"columnName" : "addTime",
							"isASC" : false
						} ],
						"page" : {
							"pageIndex" : DEFAULT_PAGE_INDEX,
							"pageSize" : DEFAULT_PAGE_SIZE
						}
					},
					columnInfo : [

					{
						"columnName" : "name",
						"columnText" : "页面名称",
						"style" : "text-align:left",
						"linkFunction" : function(event) {
							var href = RP_GPPAGE_DETAIL + "?" + RECORD_ID + "=" + event.id;
							return href;
						},
					}, {
						"columnName" : "domainName",
						"columnText" : "应用领域",
						"style" : "text-align:left"

					}, {
						"columnName" : "url",
						"columnText" : "存放路径",
						"width" : '300px',
						"style" : "text-align:left",
					}, {
						"columnName" : "addTime",
						"columnText" : "更新时间",
						"style" : "text-align:center",
					}, {
						"columnName" : "isPublicCode",
						"columnText" : "公共",
						"style" : "text-align:center",
					}

					]
				};

				var operationParam = [ {
					"operationText" : "修改",
					"buttonClass" : "yellow",
					"iconClass" : "fa fa-pencil-square-o",
					"clickFunction" : function(event) {
						window.location.href = pageParam.editPage.url + "?" + RECORD_ID + "=" + event.data.id;
					},
					"visibleFunction" : function(recordData) {
						if (recordData.status == "1")
							return false;
						return true;
					}
				}, {
					"operationText" : "删除",
					"buttonClass" : "red",
					"iconClass" : "fa fa-trash-o",
					"clickFunction" : function(event) {
						layer.confirm('您确定要删除当前记录？', {
							btn : [ '确定', '取消' ]
						}, function() {
							layer.closeAll('dialog');
							ajaxParam.submitData.page.pageSize = $("#pageSizeText").val();
							ajaxParam.submitData.page.pageIndex = $("#pageIndexHidden").val();
							pageParam.deleteInterface.url = RU_GPPAGE_DELETE;
							pageParam.deleteInterface.type = "GET";
							pageParam.deleteInterface.submitData = {
								"id" : event.data.id,
							};
							deleteRecord(pageParam, ajaxParam, operationParam);
						});
					},
					"visibleFunction" : function(recordData) {
						if (recordData.status == "1")
							return false;
						return true;
					}
				} ];
				initQueryForm(pageParam, ajaxParam, operationParam);

				$("#updatePageConstantsButton").click(
						function() {
							var pagePathConfig = getUserConfigByCode("pagePath");
							var jsPathConfig = getUserConfigByCode("jsPath");
							if (pagePathConfig)
								pagePathConfig = pagePathConfig.configValue;
							if (jsPathConfig)
								jsPathConfig = jsPathConfig.configValue;
							layer.open({
								area : [ '800px', '230px' ],
								type : 1,
								closeBtn : true,
								shift : 7,
								shadeClose : true,
								content : "<div style='width:750px;text-align: center' class='form-inline'>" + "<div style='margin: 10px' class='form-group'><label class='form-label' style='font-weight:bold'>前端页面路径： </label><input size='60pt' id='textFrontPagePath' class='form-control' type='text' name='textFrontPagePath' value='" + pagePathConfig + "'/></div>" + "<br/><div  style='margin: 10px' class='form-group'><span style='font-weight:bold'>JS    常量路径： </span><input size='60pt'  id='textJsConstantsPath' class='form-control' type='text' name='textJsConstantsPath' value='" + jsPathConfig + "'/></div>"
										+ "<br/><div style='margin: 20px,0px,20px' class='form-group'><button style='margin-top:5%;' type='button' class='form-control btn btn-block  btn-lg red-mint' onclick='updatePageConstant()'>提交</button></div></div>"
							});
							return;

						});
			});
</script>
</head>
<body class="page-header-fixed page-sidebar-closed-hide-logo page-wrapper">
	<!--#include file="/pc/ss/gp/html/cl/Top.html"-->
	<div class="page-container page-content-wrapper">
		<!--#include file="/pc/ss/gp/html/cl/Menu.html"-->
		<div class="page-content">
			<div class="row">
				<div class="col-md-12 page-bar page-bar-height  portlet ">
					<ul class="page-breadcrumb">
						<li>
							<i class="fa fa-home"></i>
							<a id="navbarIndexA" href="">主页</a>
							<i class="fa fa-angle-right"></i>
						</li>
						<li>静态链接管理</li>
					</ul>
				</div>


				<div class="col-md-12 portlet light bordered">
					<form class="portlet-body form form-inline form-body" role="form" id="queryBuilderForm">

						<label class="control-label">关键词：</label>
						<input class="form-control " id="textKeywords" name="kewwords" size="45" type="text" placeholder="可输入 /名称/路径/……" />
						<label class="control-label">是否为公共页面：</label>
						<select id="selectIsPublicCode" name="isPublicCode" class="form-control" onchange="$('#queryBuilderForm').submit();">
							<option value="">全部</option>
						</select>
						<div class="search-button">
							<button type="submit" class="btn red-mint" id="submitButton">
								<i class="fa fa-search"></i>
								搜索
							</button>
							<button type="reset" class="btn red-mint" id="resetButton">
								<i class="fa fa-reply "></i>
								重置
							</button>
						</div>
					</form>
				</div>
				<div class="col-md-12 portlet col-sm-24">
					<div class="portlet box red">
						<div class="portlet-title">
							<div class="caption">
								<i class="icon-layers"></i>
								<li>静态链接管理
							</div>
							<div class="actions">
								<!--
								<button id="addButton" type="button" class="btn btn-default btn-sm">
									<i class="fa fa-plus"></i>
									新增
								</button>
								-->
								<button id="updatePageConstantsButton" type="button" class="btn btn-default btn-sm">
									<i class="fa fa-pencil-square-o"></i>
									更新记录
								</button>
								<button id="batchEditButton" type="button" class="btn btn-default btn-sm">
									<i class="fa fa-pencil-square-o"></i>
									批量修改
								</button>
								<button id="batchDeleteButton" type="button" class="btn btn-default btn-sm">
									<i class="fa fa-trash-o"></i>
									批量删除
								</button>
								<button id="batchExportButton" type="button" class="btn btn-default btn-sm">
									<i class="fa fa-download"></i>
									导出
								</button>
							</div>
						</div>
						<div class="portlet-body">
							<div class="dataTables_wrapper no-footer">
							<div class="table-scrollable">
								<table class="table dataTable table-striped table-bordered table-hover table-checkable order-column" id="contentTable">
									<thead>

									</thead>
									<tbody>

									</tbody>
								</table>
</div>
								<div class="row">
									<div class="col-md-5 col-sm-5 dataTables_info" role="status" aria-live="polite">
										共有
										<span id="totalCountSpan">0 </span>
										条记录，每页

										<select id="pageSizeSelect" class="form-control input-xsmall input-inline">

										</select>
										条，当前第
										<span id="pageIndexSpan">0/0</span>
										页
									</div>

									<div class="col-md-5 col-sm-5">
										<div class="dataTables_paginate paging_bootstrap_full_number">
											<ul class="pagination">
												<li class="prev ">
													<a id="firstA" href="javascript:;;" title="First">
														<i class="fa fa-angle-double-left"></i>
														首页
													</a>
												</li>
												<li id="prviousA" class="prev ">
													<a href="javascript:;;" title="Prev">
														<i class="fa fa-angle-left"></i>
														上一页
													</a>
												</li>
												<li class="next">
													<a id="nextA" href="javascript:;;" title="Next">
														<i class="fa fa-angle-right"></i>
														下一页
													</a>
												</li>
												<li class="next">
													<a id="lastA" href="javascript:;;" title="Last">
														<i class="fa fa-angle-double-right"></i>
														尾页
													</a>
												</li>
											</ul>
											<div class="form-inline nowrap col-md-2 col-sm-2" style="float: right; padding-left: 25px;">
												<div class="form-group ">
													<label class="form-label">转到第</label>
													<input class="form-control" id="gotoPageText" size="3" type="text">
													<label class="form-label">页</label>
												</div>
											</div>
											<input type=hidden id="pageCountHidden" />
											<input type=hidden id="pageIndexHidden" />

										</div>
									</div>
								</div>
							</div>

						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!--#include file="/pc/ss/gp/html/cl/Footer.html"-->
</body>

</html>